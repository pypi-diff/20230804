# Comparing `tmp/atoti_query-0.8.2-0_80138c9-py3-none-any.whl.zip` & `tmp/atoti_query-0.8.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,64 +1,64 @@
-Zip file size: 59501 bytes, number of entries: 62
--rw-r--r--  2.0 unx    23472 b- defN 23-Jul-03 17:49 atoti_query/LICENSE
--rw-r--r--  2.0 unx      701 b- defN 23-Jul-03 17:39 atoti_query/__init__.py
--rw-r--r--  2.0 unx     1380 b- defN 23-Jul-03 17:39 atoti_query/_arrow_to_pandas.py
--rw-r--r--  2.0 unx     1537 b- defN 23-Jul-03 17:39 atoti_query/_cellset.py
--rw-r--r--  2.0 unx    16523 b- defN 23-Jul-03 17:39 atoti_query/_cellset_to_query_result.py
--rw-r--r--  2.0 unx     2833 b- defN 23-Jul-03 17:39 atoti_query/_create_query_cubes_from_discovery.py
--rw-r--r--  2.0 unx     1800 b- defN 23-Jul-03 17:39 atoti_query/_discovery.py
--rw-r--r--  2.0 unx      638 b- defN 23-Jul-03 17:39 atoti_query/_execute_gaq.py
--rw-r--r--  2.0 unx      308 b- defN 23-Jul-03 17:39 atoti_query/_gaq_filter.py
--rw-r--r--  2.0 unx    12981 b- defN 23-Jul-03 17:39 atoti_query/_generate_mdx.py
--rw-r--r--  2.0 unx      591 b- defN 23-Jul-03 17:39 atoti_query/_get_cube.py
--rw-r--r--  2.0 unx      281 b- defN 23-Jul-03 17:39 atoti_query/_get_data_types.py
--rw-r--r--  2.0 unx      729 b- defN 23-Jul-03 17:39 atoti_query/_get_dimensions_mapping.py
--rw-r--r--  2.0 unx      675 b- defN 23-Jul-03 17:39 atoti_query/_hierarchy_filter.py
--rw-r--r--  2.0 unx     1193 b- defN 23-Jul-03 17:39 atoti_query/_index_cellset.py
--rw-r--r--  2.0 unx     2436 b- defN 23-Jul-03 17:39 atoti_query/_index_discovery.py
--rw-r--r--  2.0 unx      509 b- defN 23-Jul-03 17:39 atoti_query/_is_gaq_filter.py
--rw-r--r--  2.0 unx      105 b- defN 23-Jul-03 17:39 atoti_query/_named.py
--rw-r--r--  2.0 unx      579 b- defN 23-Jul-03 17:39 atoti_query/_parse_level_identifier.py
--rw-r--r--  2.0 unx      490 b- defN 23-Jul-03 17:39 atoti_query/_query_mdx.py
--rw-r--r--  2.0 unx      282 b- defN 23-Jul-03 17:39 atoti_query/_query_private_parameters.py
--rw-r--r--  2.0 unx      452 b- defN 23-Jul-03 17:39 atoti_query/_widget_conversion_details.py
--rw-r--r--  2.0 unx      524 b- defN 23-Jul-03 17:39 atoti_query/auth.py
--rw-r--r--  2.0 unx     1034 b- defN 23-Jul-03 17:39 atoti_query/basic_authentication.py
--rw-r--r--  2.0 unx     1944 b- defN 23-Jul-03 17:39 atoti_query/client_certificate.py
--rw-r--r--  2.0 unx     1950 b- defN 23-Jul-03 17:39 atoti_query/oauth2_resource_owner_password_authentication.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-03 17:39 atoti_query/py.typed
--rw-r--r--  2.0 unx     4439 b- defN 23-Jul-03 17:39 atoti_query/query_cube.py
--rw-r--r--  2.0 unx      170 b- defN 23-Jul-03 17:39 atoti_query/query_cubes.py
--rw-r--r--  2.0 unx      728 b- defN 23-Jul-03 17:39 atoti_query/query_hierarchies.py
--rw-r--r--  2.0 unx      807 b- defN 23-Jul-03 17:39 atoti_query/query_hierarchy.py
--rw-r--r--  2.0 unx      354 b- defN 23-Jul-03 17:39 atoti_query/query_level.py
--rw-r--r--  2.0 unx     1316 b- defN 23-Jul-03 17:39 atoti_query/query_levels.py
--rw-r--r--  2.0 unx     1035 b- defN 23-Jul-03 17:39 atoti_query/query_measure.py
--rw-r--r--  2.0 unx      191 b- defN 23-Jul-03 17:39 atoti_query/query_measures.py
--rw-r--r--  2.0 unx     5803 b- defN 23-Jul-03 17:39 atoti_query/query_result.py
--rw-r--r--  2.0 unx    12492 b- defN 23-Jul-03 17:39 atoti_query/query_session.py
--rw-r--r--  2.0 unx      752 b- defN 23-Jul-03 17:39 atoti_query/token_authentication.py
--rw-r--r--  2.0 unx      150 b- defN 23-Jul-03 17:39 atoti_query/_internal/__init__.py
--rw-r--r--  2.0 unx      134 b- defN 23-Jul-03 17:39 atoti_query/security/__init__.py
--rw-r--r--  2.0 unx       94 b- defN 23-Jul-03 17:39 atoti_query/security/_authentication_type.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jul-03 17:39 atoti_query/security/_column_key.py
--rw-r--r--  2.0 unx      371 b- defN 23-Jul-03 17:39 atoti_query/security/_constants.py
--rw-r--r--  2.0 unx     3096 b- defN 23-Jul-03 17:39 atoti_query/security/_content_client.py
--rw-r--r--  2.0 unx      256 b- defN 23-Jul-03 17:39 atoti_query/security/_restriction.py
--rw-r--r--  2.0 unx      784 b- defN 23-Jul-03 17:39 atoti_query/security/_restriction_from_mapping.py
--rw-r--r--  2.0 unx     1443 b- defN 23-Jul-03 17:39 atoti_query/security/_restriction_to_dict.py
--rw-r--r--  2.0 unx     1162 b- defN 23-Jul-03 17:39 atoti_query/security/_restrictions.py
--rw-r--r--  2.0 unx     5094 b- defN 23-Jul-03 17:39 atoti_query/security/_roles.py
--rw-r--r--  2.0 unx     6003 b- defN 23-Jul-03 17:39 atoti_query/security/_service.py
--rw-r--r--  2.0 unx     4375 b- defN 23-Jul-03 17:39 atoti_query/security/basic_security.py
--rw-r--r--  2.0 unx     1041 b- defN 23-Jul-03 17:39 atoti_query/security/default_roles.py
--rw-r--r--  2.0 unx     4174 b- defN 23-Jul-03 17:39 atoti_query/security/individual_roles.py
--rw-r--r--  2.0 unx      730 b- defN 23-Jul-03 17:39 atoti_query/security/kerberos_security.py
--rw-r--r--  2.0 unx     1934 b- defN 23-Jul-03 17:39 atoti_query/security/ldap_security.py
--rw-r--r--  2.0 unx     2459 b- defN 23-Jul-03 17:39 atoti_query/security/oidc_security.py
--rw-r--r--  2.0 unx     3839 b- defN 23-Jul-03 17:39 atoti_query/security/role_mapping.py
--rw-r--r--  2.0 unx    12217 b- defN 23-Jul-03 17:39 atoti_query/security/security.py
--rw-r--r--  2.0 unx      913 b- defN 23-Jul-03 17:49 atoti_query-0.8.2.dist-info/METADATA
--rw-r--r--  2.0 unx      109 b- defN 23-Jul-03 17:49 atoti_query-0.8.2.dist-info/WHEEL
--rw-r--r--  2.0 unx       12 b- defN 23-Jul-03 17:49 atoti_query-0.8.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     5483 b- defN 23-Jul-03 17:49 atoti_query-0.8.2.dist-info/RECORD
-62 files, 159935 bytes uncompressed, 50697 bytes compressed:  68.3%
+Zip file size: 59439 bytes, number of entries: 62
+-rw-r--r--  2.0 unx    23472 b- defN 23-Aug-03 23:51 atoti_query/LICENSE
+-rw-r--r--  2.0 unx      701 b- defN 23-Aug-03 23:41 atoti_query/__init__.py
+-rw-r--r--  2.0 unx     1380 b- defN 23-Aug-03 23:41 atoti_query/_arrow_to_pandas.py
+-rw-r--r--  2.0 unx     1537 b- defN 23-Aug-03 23:41 atoti_query/_cellset.py
+-rw-r--r--  2.0 unx    16573 b- defN 23-Aug-03 23:41 atoti_query/_cellset_to_query_result.py
+-rw-r--r--  2.0 unx     2833 b- defN 23-Aug-03 23:41 atoti_query/_create_query_cubes_from_discovery.py
+-rw-r--r--  2.0 unx     1800 b- defN 23-Aug-03 23:41 atoti_query/_discovery.py
+-rw-r--r--  2.0 unx      638 b- defN 23-Aug-03 23:41 atoti_query/_execute_gaq.py
+-rw-r--r--  2.0 unx      308 b- defN 23-Aug-03 23:41 atoti_query/_gaq_filter.py
+-rw-r--r--  2.0 unx    12985 b- defN 23-Aug-03 23:41 atoti_query/_generate_mdx.py
+-rw-r--r--  2.0 unx      591 b- defN 23-Aug-03 23:41 atoti_query/_get_cube.py
+-rw-r--r--  2.0 unx      290 b- defN 23-Aug-03 23:41 atoti_query/_get_data_types.py
+-rw-r--r--  2.0 unx      729 b- defN 23-Aug-03 23:41 atoti_query/_get_dimensions_mapping.py
+-rw-r--r--  2.0 unx      675 b- defN 23-Aug-03 23:41 atoti_query/_hierarchy_filter.py
+-rw-r--r--  2.0 unx     1193 b- defN 23-Aug-03 23:41 atoti_query/_index_cellset.py
+-rw-r--r--  2.0 unx     2463 b- defN 23-Aug-03 23:41 atoti_query/_index_discovery.py
+-rw-r--r--  2.0 unx      509 b- defN 23-Aug-03 23:41 atoti_query/_is_gaq_filter.py
+-rw-r--r--  2.0 unx      105 b- defN 23-Aug-03 23:41 atoti_query/_named.py
+-rw-r--r--  2.0 unx      579 b- defN 23-Aug-03 23:41 atoti_query/_parse_level_identifier.py
+-rw-r--r--  2.0 unx      490 b- defN 23-Aug-03 23:41 atoti_query/_query_mdx.py
+-rw-r--r--  2.0 unx      282 b- defN 23-Aug-03 23:41 atoti_query/_query_private_parameters.py
+-rw-r--r--  2.0 unx      452 b- defN 23-Aug-03 23:41 atoti_query/_widget_conversion_details.py
+-rw-r--r--  2.0 unx      524 b- defN 23-Aug-03 23:41 atoti_query/auth.py
+-rw-r--r--  2.0 unx     1034 b- defN 23-Aug-03 23:41 atoti_query/basic_authentication.py
+-rw-r--r--  2.0 unx     1944 b- defN 23-Aug-03 23:41 atoti_query/client_certificate.py
+-rw-r--r--  2.0 unx     1950 b- defN 23-Aug-03 23:41 atoti_query/oauth2_resource_owner_password_authentication.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Aug-03 23:41 atoti_query/py.typed
+-rw-r--r--  2.0 unx     4439 b- defN 23-Aug-03 23:41 atoti_query/query_cube.py
+-rw-r--r--  2.0 unx      170 b- defN 23-Aug-03 23:41 atoti_query/query_cubes.py
+-rw-r--r--  2.0 unx      728 b- defN 23-Aug-03 23:41 atoti_query/query_hierarchies.py
+-rw-r--r--  2.0 unx      807 b- defN 23-Aug-03 23:41 atoti_query/query_hierarchy.py
+-rw-r--r--  2.0 unx      354 b- defN 23-Aug-03 23:41 atoti_query/query_level.py
+-rw-r--r--  2.0 unx     1316 b- defN 23-Aug-03 23:41 atoti_query/query_levels.py
+-rw-r--r--  2.0 unx     1035 b- defN 23-Aug-03 23:41 atoti_query/query_measure.py
+-rw-r--r--  2.0 unx      191 b- defN 23-Aug-03 23:41 atoti_query/query_measures.py
+-rw-r--r--  2.0 unx     5742 b- defN 23-Aug-03 23:41 atoti_query/query_result.py
+-rw-r--r--  2.0 unx    12498 b- defN 23-Aug-03 23:41 atoti_query/query_session.py
+-rw-r--r--  2.0 unx      752 b- defN 23-Aug-03 23:41 atoti_query/token_authentication.py
+-rw-r--r--  2.0 unx      150 b- defN 23-Aug-03 23:41 atoti_query/_internal/__init__.py
+-rw-r--r--  2.0 unx      134 b- defN 23-Aug-03 23:41 atoti_query/security/__init__.py
+-rw-r--r--  2.0 unx       94 b- defN 23-Aug-03 23:41 atoti_query/security/_authentication_type.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Aug-03 23:41 atoti_query/security/_column_key.py
+-rw-r--r--  2.0 unx      371 b- defN 23-Aug-03 23:41 atoti_query/security/_constants.py
+-rw-r--r--  2.0 unx     3096 b- defN 23-Aug-03 23:41 atoti_query/security/_content_client.py
+-rw-r--r--  2.0 unx      256 b- defN 23-Aug-03 23:41 atoti_query/security/_restriction.py
+-rw-r--r--  2.0 unx      784 b- defN 23-Aug-03 23:41 atoti_query/security/_restriction_from_mapping.py
+-rw-r--r--  2.0 unx     1465 b- defN 23-Aug-03 23:41 atoti_query/security/_restriction_to_dict.py
+-rw-r--r--  2.0 unx     1162 b- defN 23-Aug-03 23:41 atoti_query/security/_restrictions.py
+-rw-r--r--  2.0 unx     5062 b- defN 23-Aug-03 23:41 atoti_query/security/_roles.py
+-rw-r--r--  2.0 unx     6003 b- defN 23-Aug-03 23:41 atoti_query/security/_service.py
+-rw-r--r--  2.0 unx     4375 b- defN 23-Aug-03 23:41 atoti_query/security/basic_security.py
+-rw-r--r--  2.0 unx     1041 b- defN 23-Aug-03 23:41 atoti_query/security/default_roles.py
+-rw-r--r--  2.0 unx     4123 b- defN 23-Aug-03 23:41 atoti_query/security/individual_roles.py
+-rw-r--r--  2.0 unx      730 b- defN 23-Aug-03 23:41 atoti_query/security/kerberos_security.py
+-rw-r--r--  2.0 unx     1934 b- defN 23-Aug-03 23:41 atoti_query/security/ldap_security.py
+-rw-r--r--  2.0 unx     2459 b- defN 23-Aug-03 23:41 atoti_query/security/oidc_security.py
+-rw-r--r--  2.0 unx     3788 b- defN 23-Aug-03 23:41 atoti_query/security/role_mapping.py
+-rw-r--r--  2.0 unx    12217 b- defN 23-Aug-03 23:41 atoti_query/security/security.py
+-rw-r--r--  2.0 unx      913 b- defN 23-Aug-03 23:51 atoti_query-0.8.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Aug-03 23:51 atoti_query-0.8.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       12 b- defN 23-Aug-03 23:51 atoti_query-0.8.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     5482 b- defN 23-Aug-03 23:51 atoti_query-0.8.3.dist-info/RECORD
+62 files, 159840 bytes uncompressed, 50635 bytes compressed:  68.3%
```

## zipnote {}

```diff
@@ -168,20 +168,20 @@
 
 Filename: atoti_query/security/role_mapping.py
 Comment: 
 
 Filename: atoti_query/security/security.py
 Comment: 
 
-Filename: atoti_query-0.8.2.dist-info/METADATA
+Filename: atoti_query-0.8.3.dist-info/METADATA
 Comment: 
 
-Filename: atoti_query-0.8.2.dist-info/WHEEL
+Filename: atoti_query-0.8.3.dist-info/WHEEL
 Comment: 
 
-Filename: atoti_query-0.8.2.dist-info/top_level.txt
+Filename: atoti_query-0.8.3.dist-info/top_level.txt
 Comment: 
 
-Filename: atoti_query-0.8.2.dist-info/RECORD
+Filename: atoti_query-0.8.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## atoti_query/LICENSE

```diff
@@ -1,8 +1,8 @@
-This free community end user license agreement ("EULA") is entered into by and between You ("END USER") acting as a legal representative of a business entity ("END CUSTOMER") and Quartet Financial Systems, Inc., d.b.a ActiveViam, a company registered under the laws of the State of Delaware in the United States of America, with office located at 550 7th Avenue, 19th Floor, New York, New York 10018, United States of America ("ActiveViam") and governs the use by End User of Atoti CE version 0.8.2, a tool composed of a set of libraries, extensions such as JupyterLab extension, and its documentation that allows the development of rapid decision-making applications based on a large volume of datasets, developed by ActiveViam (the "SOFTWARE").
+This free community end user license agreement ("EULA") is entered into by and between You ("END USER") acting as a legal representative of a business entity ("END CUSTOMER") and Quartet Financial Systems, Inc., d.b.a ActiveViam, a company registered under the laws of the State of Delaware in the United States of America, with office located at 550 7th Avenue, 19th Floor, New York, New York 10018, United States of America ("ActiveViam") and governs the use by End User of Atoti CE version 0.8.3, a tool composed of a set of libraries, extensions such as JupyterLab extension, and its documentation that allows the development of rapid decision-making applications based on a large volume of datasets, developed by ActiveViam (the "SOFTWARE").
 
 By requesting to have access to the Software, downloading or using the Software, End User acknowledges that he/she and End Customer has understood and agreed with the terms of this EULA.
 If End Customer does not accept these terms, End User must not use the Software.
 
 End Customer and ActiveViam are hereinafter individually or collectively referred to as the "PARTY (IES)".
 
 1. Purpose & description of the Software
```

## atoti_query/_cellset_to_query_result.py

```diff
@@ -1,10 +1,11 @@
 from __future__ import annotations
 
 import math
+from collections import defaultdict
 from collections.abc import Collection, Iterable, Mapping
 from typing import TYPE_CHECKING, Any, Literal, Optional, Union, cast
 
 import pandas as pd
 from atoti_core import (
     Context,
     DataFrameColumnDescription,
@@ -377,19 +378,21 @@
 
     has_some_style = any(
         cell for cell in cellset["cells"].values() if cell["properties"]
     )
 
     member_captions_to_measure_formatted_values: dict[
         tuple[Optional[str], ...], dict[str, str]
-    ] = {}
+    ] = defaultdict(dict)
     member_captions_to_measure_styles: dict[
         tuple[Optional[str], ...], dict[str, str]
-    ] = {}
-    member_names_to_measure_values: dict[tuple[Optional[str], ...], dict[str, Any]] = {}
+    ] = defaultdict(dict)
+    member_names_to_measure_values: dict[
+        tuple[Optional[str], ...], dict[str, Any]
+    ] = defaultdict(dict)
 
     has_some_cells_or_any_non_measures_hierarchy = cellset["cells"] or any(
         hierarchy != _MEASURES_HIERARCHY
         for axis in cellset["axes"]
         for hierarchy in axis["hierarchies"]
     )
     cell_count = (
@@ -429,27 +432,27 @@
             member_names = _get_members_path(
                 non_measure_cell_members, property_name="namePath"
             )
             member_captions = _get_members_path(
                 non_measure_cell_members, property_name="captionPath"
             )
 
-            member_names_to_measure_values.setdefault(member_names, {})[
-                measure["namePath"][0]
-            ] = (None if cell is None else cell["value"])
-            member_captions_to_measure_formatted_values.setdefault(member_captions, {})[
+            member_names_to_measure_values[member_names][measure["namePath"][0]] = (
+                None if cell is None else cell["value"]
+            )
+            member_captions_to_measure_formatted_values[member_captions][
                 measure["captionPath"][0]
             ] = (
                 ""
                 if cell is None
                 else _get_pythonic_formatted_value(cell["formattedValue"])
             )
 
             if has_some_style:
-                member_captions_to_measure_styles.setdefault(member_captions, {})[
+                member_captions_to_measure_styles[member_captions][
                     measure["captionPath"][0]
                 ] = (
                     ""
                     if cell is None
                     else _cell_properties_to_style(cell["properties"])
                 )
```

## atoti_query/_generate_mdx.py

```diff
@@ -160,15 +160,15 @@
             ].values()
             if level["type"] != "ALL"
         )
         != level_identifier.level_name
     ):
         raise (
             ValueError(
-                f"Only conditions based on the shallowest level of a hierarchy are supported but level {level_identifier} was given."
+                f"Only conditions based on the shallowest level of a hierarchy are supported but level {level_identifier!r} was given."
             )
         )
 
 
 def _generate_hierarchy_identifier_to_filter(
     *,
     comparison_conditions: Iterable[
@@ -244,15 +244,15 @@
         parts.append("[AllMember]")
 
     for member in member_path:
         value = member.value
         if not isinstance(value, str):
             raise (
                 TypeError(
-                    f"Only conditions against strings are supported but `{hierarchy_identifier}` was compared against `{value}` of type `{type(value)}`."
+                    f"Only conditions against strings are supported but `{hierarchy_identifier!r}` was compared against `{value}` of type `{type(value)}`."
                 )
             )
 
         parts.append(f"[{_escape(value)}]")
 
     return ".".join(parts)
```

## atoti_query/_get_data_types.py

```diff
@@ -1,11 +1,11 @@
 from collections.abc import Iterable
 from typing import Protocol
 
-from atoti_core import DataType, IdentifierT
+from atoti_core import DataType, IdentifierT_co
 
 
 class GetDataTypes(Protocol):
     def __call__(
-        self, identifier: Iterable[IdentifierT], /, *, cube_name: str
-    ) -> dict[IdentifierT, DataType]:
+        self, identifier: Iterable[IdentifierT_co], /, *, cube_name: str
+    ) -> dict[IdentifierT_co, DataType]:
         ...
```

## atoti_query/_index_discovery.py

```diff
@@ -13,39 +13,39 @@
     IndexedDiscoveryCatalog,
     IndexedDiscoveryCube,
     IndexedDiscoveryDimension,
     IndexedDiscoveryHierarchy,
 )
 from ._named import Named
 
-_IndexableT = TypeVar("_IndexableT", bound=Named, covariant=True)
+_IndexableT_co = TypeVar("_IndexableT_co", bound=Named, covariant=True)
 _TransformedT = TypeVar("_TransformedT")
 
 
 @overload
-def _index(iterable: Iterable[_IndexableT], /) -> Mapping[str, _IndexableT]:
+def _index(iterable: Iterable[_IndexableT_co], /) -> Mapping[str, _IndexableT_co]:
     ...
 
 
 @overload
 def _index(
-    iterable: Iterable[_IndexableT],
+    iterable: Iterable[_IndexableT_co],
     /,
     *,
-    transform: Callable[[_IndexableT], _TransformedT],
+    transform: Callable[[_IndexableT_co], _TransformedT],
 ) -> Mapping[str, _TransformedT]:
     ...
 
 
 def _index(
-    iterable: Iterable[_IndexableT],
+    iterable: Iterable[_IndexableT_co],
     /,
     *,
-    transform: Optional[Callable[[_IndexableT], _TransformedT]] = None,
-) -> Mapping[str, Union[_IndexableT, _TransformedT]]:
+    transform: Optional[Callable[[_IndexableT_co], _TransformedT]] = None,
+) -> Mapping[str, Union[_IndexableT_co, _TransformedT]]:
     return {
         element["name"]: transform(element) if transform else element
         for element in iterable
     }
 
 
 def _index_hierarchy(hierarchy: DiscoveryHierarchy, /) -> IndexedDiscoveryHierarchy:
```

## atoti_query/query_result.py

```diff
@@ -2,15 +2,14 @@
 
 import logging
 from collections.abc import Callable
 from typing import TYPE_CHECKING, Any, Optional
 
 import pandas as pd
 from atoti_core import HTML_MIME_TYPE, TEXT_MIME_TYPE, Context
-from typeguard import typeguard_ignore
 
 from ._widget_conversion_details import (
     CONVERT_QUERY_RESULT_TO_WIDGET_MIME_TYPE,
     WidgetConversionDetails,
 )
 
 if TYPE_CHECKING:
@@ -38,15 +37,14 @@
         "_atoti_get_styler",
         "_atoti_has_been_mutated",
         "_atoti_initial_dataframe",
         "_atoti_widget_conversion_details",
     ]
     _internal_names_set = set(_internal_names)  # noqa: RUF012
 
-    @typeguard_ignore
     def __init__(
         self,
         # pandas does not expose the types of these arguments.
         data: Any = None,
         index: Any = None,
         *,
         context: Optional[Context] = None,
```

## atoti_query/query_session.py

```diff
@@ -138,15 +138,15 @@
         url: str,
         *,
         auth: Optional[Auth] = None,
         certificate_authority: Optional[Union[str, Path]] = None,
         client_certificate: Optional[ClientCertificate] = None,
         **kwargs: Any,
     ):
-        """Create a QuerySession.
+        """Create a query session.
 
         Args:
             url: The base URL of the session.
                 The endpoint ``f"{url}/versions/rest"`` is expected to exist.
             auth: The authentication to use to access the session.
             certificate_authority: Path to the custom certificate authority file to use to verify the HTTPS connection.
                 Required when the session has been configured with a certificate that is not signed by some trusted public certificate authority.
@@ -179,15 +179,15 @@
         plugins = (
             PLUGINS.default
             if private_parameters.plugins is None
             else private_parameters.plugins
         )
 
         for plugin in plugins.values():
-            plugin.init_session(self)
+            plugin.post_init_session(self)
 
     @property
     def cubes(self) -> QueryCubes:
         """Cubes of the session."""
         return self._cubes
 
     @cached_property
```

## atoti_query/security/_restriction_to_dict.py

```diff
@@ -1,9 +1,11 @@
 from __future__ import annotations
 
+from collections import defaultdict
+
 from atoti_core import ColumnIdentifier, Constant, decombine_condition
 
 from ._restriction import Restriction
 
 
 def _get_restricted_element(constant: Constant, /) -> str:
     value = constant.value
@@ -13,29 +15,29 @@
             f"Expected restricted element to be a string but got `{value}` of type `{type(value)}`."
         )
 
     return value
 
 
 def restriction_to_dict(restriction: Restriction, /) -> dict[str, dict[str, list[str]]]:
-    result: dict[str, dict[str, list[str]]] = {}
+    result: dict[str, dict[str, list[str]]] = defaultdict(dict)
 
     comparison_conditions, isin_conditions, _ = decombine_condition(
         restriction,
         allowed_subject_types=(ColumnIdentifier,),
         allowed_comparison_operators=("eq",),
         allowed_target_types=(Constant,),
         allowed_combination_operators=("and",),
         allowed_isin_element_types=(Constant,),
     )[0]
 
     for comparison_condition in comparison_conditions:
-        result.setdefault(comparison_condition.subject.table_identifier.table_name, {})[
+        result[comparison_condition.subject.table_identifier.table_name][
             comparison_condition.subject.column_name
         ] = [_get_restricted_element(comparison_condition.target)]
 
     for isin_condition in isin_conditions:
-        result.setdefault(isin_condition.subject.table_identifier.table_name, {})[
+        result[isin_condition.subject.table_identifier.table_name][
             isin_condition.subject.column_name
         ] = [_get_restricted_element(element) for element in isin_condition.elements]
 
     return result
```

## atoti_query/security/_roles.py

```diff
@@ -1,14 +1,14 @@
 from __future__ import annotations
 
+from collections import defaultdict
 from collections.abc import Iterable, Iterator, Mapping, MutableMapping
 from typing import Optional, Union
 
 from atoti_core import DelegateMutableMapping, ReactiveMutableSet
-from typeguard import typechecked
 
 from ._column_key import ColumnKey
 from ._restriction import Restriction
 from ._restriction_from_mapping import restriction_from_mapping
 from ._restriction_to_dict import restriction_to_dict
 from ._service import Service
 
@@ -35,30 +35,28 @@
         role: Role,
         service: Service,
     ) -> None:
         self._restrictions = restrictions
         self._role = role
         self._service = service
 
-    @typechecked
     def __setitem__(
         self, key: ColumnKey, value: Union[Iterable[str], _AllowedMembers], /
     ) -> None:
         if isinstance(value, _AllowedMembers):
             self._restrictions[key] = value
         else:
             self._restrictions[key] = _AllowedMembers(
                 value,
                 column_key=key,
                 role=self._role,
             )
 
         self._service.upsert_restriction(self._restriction, role_name=self._role.name)
 
-    @typechecked
     def __getitem__(self, key: ColumnKey, /) -> _AllowedMembers:
         return self._restrictions[key]
 
     def __delitem__(self, key: ColumnKey, /) -> None:
         del self._restrictions[key]
         self._service.upsert_restriction(self._restriction, role_name=self._role.name)
 
@@ -66,18 +64,18 @@
         return iter(self._restrictions)
 
     def __len__(self) -> int:
         return len(self._restrictions)
 
     @property
     def _restriction(self) -> Restriction:
-        restriction: dict[str, dict[str, list[str]]] = {}
+        restriction: dict[str, dict[str, list[str]]] = defaultdict(dict)
 
         for (table_name, column_name), members in self.items():
-            restriction.setdefault(table_name, {})[column_name] = list(members)
+            restriction[table_name][column_name] = list(members)
 
         return restriction_from_mapping(restriction)
 
 
 class Role:
     def __init__(
         self,
```

## atoti_query/security/individual_roles.py

```diff
@@ -5,15 +5,14 @@
     TYPE_CHECKING,
     Optional,
     Union,
     overload,
 )
 
 from atoti_core import DelegateMutableMapping, ReactiveMutableSet, deprecated
-from typeguard import typechecked
 
 from ._service import Service
 
 if TYPE_CHECKING:
     from _typeshed import SupportsKeysAndGetItem  # pylint: disable=nested-import
 
 
@@ -80,15 +79,14 @@
 
     def _delete_keys(self, keys: Optional[Iterable[str]] = None, /) -> None:
         keys = self._default_to_all_keys(keys)
         for username in keys:
             self._service.delete_individual_roles_for_user(username)
 
     # Custom override with same value type as the one used in `update()`.
-    @typechecked
     def __setitem__(self, key: str, value: _UserRolesDescription, /) -> None:
         self.update({key: value})
 
     def _update(self, other: Mapping[str, _UserRolesDescription], /) -> None:
         for username, roles in other.items():
             self._service.upsert_individual_roles(username, roles=roles)
```

## atoti_query/security/role_mapping.py

```diff
@@ -5,15 +5,14 @@
     TYPE_CHECKING,
     Optional,
     Union,
     overload,
 )
 
 from atoti_core import DelegateMutableMapping, ReactiveMutableSet, deprecated
-from typeguard import typechecked
 
 from ._authentication_type import AuthenticationType
 from ._service import Service
 
 if TYPE_CHECKING:
     from _typeshed import SupportsKeysAndGetItem  # pylint: disable=nested-import
 
@@ -58,15 +57,14 @@
                 role_name=role_name,
                 role_mapping=self,
             )
             for role_name, authorities in role_mapping.items()
         }
 
     # Custom override with same value type as the one used in `update()`.
-    @typechecked
     def __setitem__(self, key: str, value: _RoleMappingDescription, /) -> None:
         self.update({key: value})
 
     def _update(self, other: Mapping[str, _RoleMappingDescription], /) -> None:
         for role_name, authorities in other.items():
             self._service.upsert_role_mapping(
                 role_name,
```

## Comparing `atoti_query-0.8.2.dist-info/METADATA` & `atoti_query-0.8.3.dist-info/METADATA`

 * *Files 9% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 Metadata-Version: 2.1
 Name: atoti-query
-Version: 0.8.2
+Version: 0.8.3
 Summary: Package to query Atoti sessions.
 Home-page: https://www.atoti.io
 Author: ActiveViam
 Author-email: dev@atoti.io
-Project-URL: Documentation, https://docs.atoti.io/0.8.2/lib/atoti-query/atoti_query.html
+Project-URL: Documentation, https://docs.atoti.io/0.8.3/lib/atoti-query/atoti_query.html
 Project-URL: Bug Tracker, https://github.com/atoti/atoti/issues
 Keywords: atoti,query
 Classifier: Development Status :: 4 - Beta
 Classifier: License :: Free To Use But Restricted
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python :: 3
 Classifier: Typing :: Typed
-Requires-Dist: atoti-core (==0.8.2)
+Requires-Dist: atoti-core (==0.8.3)
 Requires-Dist: pandas
 Requires-Dist: pyarrow (>=11.0.0)
 Requires-Dist: typeguard (<3,>=2.13.3)
 Requires-Dist: typing-extensions
 Provides-Extra: dev
 Requires-Dist: atoti ; extra == 'dev'
 Requires-Dist: premailer ; extra == 'dev'
```

## Comparing `atoti_query-0.8.2.dist-info/RECORD` & `atoti_query-0.8.3.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,23 +1,23 @@
-atoti_query/LICENSE,sha256=JSyRUznwhVW6jj2RsFMZDaY_2QEQFMMOlbJvTy8OgOk,23472
+atoti_query/LICENSE,sha256=uj-cQ9LFo0v58DA-lc_SlI46k1rg1zHPkXQ_RNPB-bQ,23472
 atoti_query/__init__.py,sha256=nlKOuGwPpZjqAyzppFyoGObKuzwJ72BcKKBYZsWxbP8,701
 atoti_query/_arrow_to_pandas.py,sha256=7znZL4BF0SAqHDHvYIM25DFVJ9maARtC8b4g_WTecQY,1380
 atoti_query/_cellset.py,sha256=31VjRBClRi1hJNILVBI0ukBqsMDSjvuIjVspjwpEYxA,1537
-atoti_query/_cellset_to_query_result.py,sha256=mIHCUOROlBfxjcWUd6fsDkd0zk1FnbuPonM_rOVTO_8,16523
+atoti_query/_cellset_to_query_result.py,sha256=kSC3bheNtcm0q66CXiMKJ2MSGGrUz0LUkMp_gldo-38,16573
 atoti_query/_create_query_cubes_from_discovery.py,sha256=DPebYApqK1hjn5lxsTOcggHAHvj4r_e0CspZZQLwHeU,2833
 atoti_query/_discovery.py,sha256=74zt9CSuHqlpTKAcvByB2cb12SGFvV0DsSip_MxL_3c,1800
 atoti_query/_execute_gaq.py,sha256=daLDTkHO1f1bAqz-cdlSJM9MZ-yavNOjhV5n7pZoVOc,638
 atoti_query/_gaq_filter.py,sha256=XMz-s-JHvnXOCe1wbshc52uMv_68BK-S3hvuDmsTaek,308
-atoti_query/_generate_mdx.py,sha256=pv2jR3lrbqs55MCJx2fI_JkiG3ynAiUc_RI_nn6DlcI,12981
+atoti_query/_generate_mdx.py,sha256=vdukAJI6Z7QekJmtSMqPMFLyGLl_JVyJaB3VVmb_Cl8,12985
 atoti_query/_get_cube.py,sha256=ZehybO2Pe-uRE6-N7tFMkAVHT6oPQg3uInUGrL5Tuc0,591
-atoti_query/_get_data_types.py,sha256=-Ac4HRAaPL8XAz46S5pZGKMZZCbOG53MylDogxIZ-6I,281
+atoti_query/_get_data_types.py,sha256=TB5A3VKwxFoihgkRTIOlbbuZlk5Zx8d8K5qLxtnYqu8,290
 atoti_query/_get_dimensions_mapping.py,sha256=G5WsMN4Rk2YFgLYSKihXMxXaR1FPfxnkO7kBilXNeqY,729
 atoti_query/_hierarchy_filter.py,sha256=3Pb5KQK7jBKh8IQLW7vPXbIZogSZnlcCoHAtgKzSCx0,675
 atoti_query/_index_cellset.py,sha256=8AcqobIYFHLt1kJx_Be1bcyDWAKY7abZH1f10YL5LTA,1193
-atoti_query/_index_discovery.py,sha256=bypkfSbsJGPXm2JZF7GFTFOQKCxpNn5WPJtwkcjnWn4,2436
+atoti_query/_index_discovery.py,sha256=PusBWsHOo8wDr2DRAgK53abBT5qLLOsQGZVwXCuUouc,2463
 atoti_query/_is_gaq_filter.py,sha256=b1xSy1it2F5s17YMs1_U3Md7WVQR7XEhENMgiMjwHQ0,509
 atoti_query/_named.py,sha256=vx1is0vXKoeVTvQ_WmVTOzDjGh7Ej07fDKkwwxTVZIE,105
 atoti_query/_parse_level_identifier.py,sha256=TaDTOssQmS9KFTNAABR9S_tGUM8DvzWR2ysV-c47lyQ,579
 atoti_query/_query_mdx.py,sha256=VQp6CVWfxZLuUPCUt_grsS_yTj4bfMYymrYa9xxTJPE,490
 atoti_query/_query_private_parameters.py,sha256=6Jah5FPzeuxLMfuk8Ajfgvm7Cdr_4BIwknSSopqyGts,282
 atoti_query/_widget_conversion_details.py,sha256=ernM6QROJNCrr0eeJyhlbxqlrLh7segI1rVyieGMI-A,452
 atoti_query/auth.py,sha256=tGtvk4CmR8NLykP6o4XG3sA5q1CL-M_SqPkn8uxRizw,524
@@ -29,34 +29,34 @@
 atoti_query/query_cubes.py,sha256=BEuklC8h2hVyYxJWRg_yf36uZLeYz6TrjkihBVTm15E,170
 atoti_query/query_hierarchies.py,sha256=0SqmmMRO5iGKAp_sO7ZRG72_NeDlf48a_zNF21rG6q8,728
 atoti_query/query_hierarchy.py,sha256=TpMxai7hLu1v71ZlNNnTJF0r75MqUx8vXU-4uigCZeY,807
 atoti_query/query_level.py,sha256=HGqEjLoQDO3OiU0lmn8wd2Kbpp5V4yBmkUSHD-ceOzQ,354
 atoti_query/query_levels.py,sha256=Ni4tHEaxE1w3DT-HGGnaDJsH_HFLIkva2ssdo7IBWjk,1316
 atoti_query/query_measure.py,sha256=uG5jDqrmPH_9OodLZe6Ey8gYSFhDD-39WOmMn1uVgQ8,1035
 atoti_query/query_measures.py,sha256=ITYf51DPopmKzs55svPisEkcfjCYbsfEg0L3BMy6Dtw,191
-atoti_query/query_result.py,sha256=qwnJHS_ZWcacdhEr_5PWRCQWoWuFxzPZLjYnvIgE-6w,5803
-atoti_query/query_session.py,sha256=0h59cW72eG8qRf8ESkhBQeLIejIuMjPw1ghufbSdqwg,12492
+atoti_query/query_result.py,sha256=rl-uAUb6r78xAXQ3KFg4-25B5UNh5wfdRFZm_i6UQvk,5742
+atoti_query/query_session.py,sha256=fhphWuQhcZ6xTo_ii6OVA8nt53E1Ega7plMkbD-TiXg,12498
 atoti_query/token_authentication.py,sha256=u_Dwne3B5Dz-wRmNSBMg-m1ecWv3D9HnkT2PovoQSQU,752
 atoti_query/_internal/__init__.py,sha256=MZDcH9fPOFc-LEPhri-BtOd09coIJdRJrHQCCH_LT78,150
 atoti_query/security/__init__.py,sha256=ysupEFwAXW_dwOMiVMFydrvgqd_p1PJ35YmH9__M_BY,134
 atoti_query/security/_authentication_type.py,sha256=hBZVtzbO6fKQT074X7dDPqYKzNqBfU4tqpL0c9G3Hbg,94
 atoti_query/security/_column_key.py,sha256=Y_O2JBMGPjueJ00Yl2mZJUKwgYLzr3uaBjDbPoEla64,28
 atoti_query/security/_constants.py,sha256=H_iZzhd4aEsxO161XeyCgiQSEHHEzJbKzO5WQ9cf-wg,371
 atoti_query/security/_content_client.py,sha256=t9EsTzXp9lbeQ0xz5jSKE1s95ZPGzAV4tJU6PKcke1c,3096
 atoti_query/security/_restriction.py,sha256=aee7CgwoMfCe2BCzCzlVd47jjFDezcYaAVcBWh9ADuM,256
 atoti_query/security/_restriction_from_mapping.py,sha256=wteF1bxU9_F7sKc2qg-4g-vS1hDFGpkPmd60SsLcdnw,784
-atoti_query/security/_restriction_to_dict.py,sha256=k7vexM6tM1NA491lsvh6a48NEayDKnQz6-ax0gCQmK0,1443
+atoti_query/security/_restriction_to_dict.py,sha256=bho4Id3ixfHK78i1OSXsJOod4cMGALrd1vwJ2z9JJhQ,1465
 atoti_query/security/_restrictions.py,sha256=5xDXZiNrz1rfAkd6uai0SOVGNGMaaguXCuYfH0eZHMg,1162
-atoti_query/security/_roles.py,sha256=-70bIhdtSQnTwDMvoxf_XFOfaz2dTl2JOJ8fEqmrFwo,5094
+atoti_query/security/_roles.py,sha256=-Lcwi31iBql6CBJgz42iEVJkeX4F-7pq18r_2BebBWo,5062
 atoti_query/security/_service.py,sha256=UCJIDZEP-41gk262CEsczGkw6aYBVzKOqrikOiJLB84,6003
 atoti_query/security/basic_security.py,sha256=G95wDk62IdBbyJhjiM0OC8uGMNheTfTPfaDD-dwAO4c,4375
 atoti_query/security/default_roles.py,sha256=ZzeDqDs0hFHkz-5FrrpI0-sksuAVFS22TnMmNbZg2ak,1041
-atoti_query/security/individual_roles.py,sha256=P-cgn5neUPHMn5mf3KO8SVpfRSb-aRPBwLyfdSY02Ic,4174
+atoti_query/security/individual_roles.py,sha256=RIV-qDt6BE62sDDonUsM5QJ9Elj1HBHoEVwCz2ynRMk,4123
 atoti_query/security/kerberos_security.py,sha256=SuUMXIuGnzb35nD0nHd0wnpmKgPJ__xf5JvEmUTnyGM,730
 atoti_query/security/ldap_security.py,sha256=37e5MuWYGUOl3uggaxtyVePXptOd88bqWRwuGAQ_49I,1934
 atoti_query/security/oidc_security.py,sha256=dE_bSwqVGUrkEs7eLxbVWHtH6HSL7mti8Fz_t3G2a4U,2459
-atoti_query/security/role_mapping.py,sha256=HXsEKEpJqKRDEMD_Y3HhSL5cqUvc0yFszQQ0hOCOows,3839
+atoti_query/security/role_mapping.py,sha256=a6lRbj8tN_-k14T5pO34x9vujFGyUGYcD768ft_dT-w,3788
 atoti_query/security/security.py,sha256=7KLl9HU2YiNBU3hFNJwZFqSKB16zgTKKfWMDXPJhcdE,12217
-atoti_query-0.8.2.dist-info/METADATA,sha256=OYqWxEjK7pKQDbfRzEVYpQxC8nkV7QIO_MbfggO6weY,913
-atoti_query-0.8.2.dist-info/WHEEL,sha256=8ngoJnqny485_Zhidm3gUHNLPQTUIjfhFb7Qoa0d3wA,109
-atoti_query-0.8.2.dist-info/top_level.txt,sha256=wyZL-Ia80k5wcrEvOrU6A20dbpqueW_6Lt3PfPv8lFo,12
-atoti_query-0.8.2.dist-info/RECORD,,
+atoti_query-0.8.3.dist-info/METADATA,sha256=YAm_uXSaxi0fCxK_Zv-wL9zhw1z3g_70PUB1L8cgxyY,913
+atoti_query-0.8.3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+atoti_query-0.8.3.dist-info/top_level.txt,sha256=wyZL-Ia80k5wcrEvOrU6A20dbpqueW_6Lt3PfPv8lFo,12
+atoti_query-0.8.3.dist-info/RECORD,,
```

